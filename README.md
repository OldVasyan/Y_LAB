# Y_LAB Marketplace:2 (JDBC, Liquibase, Testcontainers)

## Обзор проекта

Это второе домашнее задание в рамках курса, посвященное миграции системы хранения данных с In-Memory на PostgreSQL.

Проект реализует базовые CRUD-операции для сущности `Product` с использованием JDBC, пула соединений HikariCP и соответствует всем требованиям по структуре базы данных.

## Ключевые особенности:

* База данных: PostgreSQL.
* Соединение: Чистый JDBC и пул соединений HikariCP.
* Миграции БД: Liquibase (миграции в формате XML).
* Тестирование: Интеграционные тесты с использованием Testcontainers.
* Сборка: Maven Shade Plugin для создания Executable JAR.
* Конфигурация: Настройки БД и Liquibase вынесены в конфигурационные файлы.


## Запуск и проверка проекта

Для сборки и запуска проекта необходимо иметь установленные Java (JDK 17+) и Docker/Docker Compose.

## Запуск инфраструктуры (PostgreSQL)

Проект использует Docker Compose для развертывания экземпляра PostgreSQL.

## Запуск контейнера в фоновом режиме
docker-compose up -d
Настройки подключения (логин, пароль, имя базы) для приложения отличаются от стандартных.

## Сборка проекта и прохождение тестов
Для проверки функциональности, сборки исполняемого файла и прохождения всех интеграционных тестов используйте Maven:

## Очистка, компиляция и выполнение тестов
mvn clean package   

Важно: Во время выполнения тестов Testcontainers автоматически запустит собственный временный контейнер PostgreSQL для обеспечения изоляции тестов.

Ожидаемый результат: [INFO] BUILD SUCCESS.

После успешной сборки исполняемый JAR-файл будет доступен в папке target/.

## Запуск приложения (Опционально)
Приложение можно запустить с помощью сгенерированного "толстого" JAR-файла, который содержит все необходимые зависимости.

java -jar target/Y_LAB-1.0-SNAPSHOT-shaded.jar (Или имя вашего jar)

## Миграций (Liquibase)
Служебная схема: Таблицы Liquibase хранятся в отдельной схеме (liquibase).

Схема данных: Таблицы сущностей (product, user) хранятся в отдельной схеме (catalog).

Скрипты разделены на логические части:

db/changelog/001-create-schemas-tables.xml – Создание всех таблиц и последовательностей.

db/changelog/002-seed-data.xml – Предзаполнение данных.

db/changelog/003-... – Дополнительные миграции.
